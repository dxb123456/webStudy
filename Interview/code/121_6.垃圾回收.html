<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>
    //js不需要进行手动进行垃圾回收，会自动进行垃圾回收

    // 垃圾回收机制原理：
        //1.找出不再使用的变量
        //2.释放其占用的内存
        //3.非固定周期运行

    // 全局变量 一般不会被回收，
    // 局部变量 ：只在函数执行阶段存在，函数执行结束，如果内部没有形成闭包的话，整个局部函数的作用域会被清除，里面的局部变量也随之被垃圾回收机制回收

    //如何解除闭包引用  ：赋值为null


    //标记清除：(所有浏览器都在使用)
    //例如：   mark和sweep
        function test(){
            var a=0 ;    //当生命变量时 打上标记-进入环境
        }
        test()  //当函数执行完后 打入标记-离开环境 ,当垃圾回收机制运行时，会排除 全局变量 和 闭包引用的上下文环境，再将离开标记的清除掉。

        var b=0;
        var c =1;
        function aa(){}

    // 低版本 ie使用引用计数: 每次引用计数+1，当计数变成0 时会被垃圾回收机制清除，
        function test2(){
            var  a= new Object ; // 引用计数+1
            var  b= new Object ; // 引用计数+1
            var  c=a            //a中的引用计数+1 =2

            //弊端：当循环引用时，永远不会被清除
            b.c = a;
            a.b=b
        }
        // 解除引用 可以赋值为null;

</script>
</body>
</html>
